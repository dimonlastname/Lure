"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();Lure.Plugin.Chart={Core:"",Chart:function(){function t(){function e(){L.SeriesBar=0,x.Series(),this.Block.Legend=L.Legend,x.AxisY(),x.AxisX(),y.AxisX(),x.ScaleY(),this.Block.Grid=y.MakeGrid(),this.Block.AxisY=y.MakeAxisY(),"line"!==this.Options.Type&&"bar"!==this.Options.Type||(this.Block.Svg=O.__GetSvgCasual()),"pie"!==this.Options.Type&&"ring"!==this.Options.Type||(this.Block.Svg=O.__GetSvgPie()),this.Block.AxisY.style.height=this.Height+"px";var t=Lure.SelectAll('.mt-chart-serie[data-type="Line"] path',this.Content);C.Height=this.Height,C.Width=this.Width,t.forEach(function(t){var e=t.getTotalLength();t.style.strokeDasharray=e,t.style.strokeDashoffset=e})}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.Type,r=void 0===a?"Line":a,n=s.Title,o=void 0===n?"":n,l=s.Labels,h=void 0===l?{Rotation:"auto",Data:[]}:l,c=s.Grid,d=void 0===c?{}:c,u=s.Series,p=void 0===u?[]:u,f=s.Tooltip,v=void 0===f?{Template:null}:f,g=s.AxisY,b=void 0===g?{Scale:["auto","auto","auto"],Visible:!0}:g;s.Height,s.SeriesOptions;_classCallCheck(this,t);var S=["red","green","cornflowerblue","purple","palevioletred","orange","tomato","darkblue"],m={Line:"Name: {{Name}}<br>Value: {{Value}}",Pie:"Name: {{Name}}<br>Value: {{Value}}"};Lure.Chart.Count++;var O=this;this.Content=Lure.Select(i),this.Content.classList.add("mt-chart"),this.Content.style.position="relative",this.isGraph=!0;var L={Legend:"",AxisX:"",AxisY:"",Grid:"",Svg:"",Height:0,Width:0,Abscissa:null,SeriesPoints:[],SeriesCount:{Line:0,Bar:0,Pie:0,Ring:0},SeriesBar:0,ParametersAxisX:null};this._Series=p,this.Options={Type:r?r.toLowerCase():"line",Title:o?o:"",Legend:{Visible:!0},Labels:{Visible:"undefined"==typeof h.Visible||h.Visible,Rotation:h.Rotation?h.Rotation:"auto",Data:h.Data?h.Data:[],Font:{Family:"sans-serif",Size:"0.8rem"}},Grid:{Visible:"undefined"==typeof d.Visible||d.Visible},Series:null,SeriesOptions:{BarStack:!1,BarGradient:!0,PieStack:!1,PieType:"pie"},AxisY:{Font:{Family:"sans-serif",Size:"0.8rem"},Scale:b.Scale?[Lure.isNumeric(b.Scale[0])?b.Scale[0]:"auto",Lure.isNumeric(b.Scale[1])?b.Scale[1]:"auto",Lure.isNumeric(b.Scale[2])?b.Scale[2]:"auto"]:["auto","auto","auto"],Visible:"undefined"==typeof b.Visible||b.Visible},Padding:0,Tooltip:{Template:null}},this.Block=function(){this.Content.innerHTML='<div class="mt-chart col">\n                                        <div class="mt-chart-caption">\n                                          <div class=\'mt-chart-title\'>'+o+'</div>\n                                          <div class="mt-chart-legend row"></div>\n                                        </div>\n                                        <div class="mt-chart-kek row flex-100">\n                                          <div class="mt-chart-y row"></div>\n                                          <div class="col flex-100">\n                                            <div class="mt-chart-area row flex-100">\n                                              <svg class="mt-chart-svg"></svg>\n                                              <div class="mt-chart-grid" style=" position: absolute;"></div>\n                                            </div>\n                                            <div class="mt-chart-x row"></div>\n                                           </div>\n                                        </div>\n                                      </div>';var t=this.Content.querySelector(".mt-chart-legend"),e=this.Content.querySelector(".mt-chart-x"),i=this.Content.querySelector(".mt-chart-y"),s=this.Content.querySelector(".mt-chart-area"),a=this.Content.querySelector(".mt-chart-grid"),r=this.Content.querySelector(".mt-chart-svg");return{get Legend(){return t},set Legend(e){t.innerHTML=e},get AxisX(){return e},set AxisX(t){e.innerHTML=t},get AxisY(){return i},set AxisY(t){i.innerHTML=t},get ChartArea(){return s},set ChartArea(t){s.innerHTML=t},get Grid(){return a},set Grid(t){a.innerHTML=t},get Svg(){return r},set Svg(t){r.innerHTML=t}}}.bind(this)();var y={Legend:function(){},AxisX:function(){if(!O.Options.Labels.Visible)return void(this.Block.AxisX="");for(var t=O.Options.Labels.Data,e="transform: translate("+L.AxisXParams.MarginLeft+"px) rotate("+L.AxisXParams.Angle+"deg); margin-top: "+L.AxisXParams.MarginTop+"px ; width: "+L.AxisXParams.Width+"px;",i="",s=0;s<t.length;s++)i+='<div class="mt-chart-label mt-chart-label__x" style="font-family: '+O.Options.Labels.Font.Family+"; font-size: "+O.Options.Labels.Font.Size+'"><span style="'+e+'">'+t[s]+"</span></div>";L.AxisX=i,this.Block.AxisX=i,this.Block.AxisX.style.borderTop="1px #111 solid"}.bind(this),AxisY:function(){return!this.Options.Labels.Visible,""}.bind(this),Make3Legend:function(t,e){return'<div class="mt-chart-legend__item row">\n                          <input class="mt-legend-checkbox" type="checkbox" checked="checked" id="legcheck'+t.Name+e+'">\n                          <div class="mt-legend-icon" style="background-color: '+t.Color+'"></div>\n                          <label class="mt-legend-label" for="legcheck'+t.Name+e+'">'+t.Name+"</label>\n                        </div>"},MakeAxisY:function(){var t=0;if(!O.Options.AxisY.Visible&&(t=1,O._ScaleY.Scales.length<2))return"";var e="font-family: "+O.Options.Labels.Font.Family+"; font-size: "+O.Options.Labels.Font.Size+";",i="";for(t;t<O._ScaleY.Scales.length;t++){var s=O._ScaleY.Dict.indexOf(t),a=O._ScaleY.Scales[t],r="";t>0&&(r='<div class="mt-chart-axis-caption"><div style="transform: rotate(-90deg)">'+O.Options.Series[s].Title+"</div></div>");for(var n="",o=0;o<a.length;o++)n+='<div class="mt-chart-label mt-chart-label__y"><span>'+a[o]+"</span></div>";t>0&&(e+=" color: "+O.Options.Series[s].Color+"; font-weight: bold;"),i+='<div class="mt-chart-axis__y row" style="'+e+'" data-line="'+t+'">'+r+'<div class="mt-chart-labels col">'+n+"</div></div>"}return i},MakeAxisX:function(){if(!O.Options.Labels.Visible)return"";for(var t=O.Options.Labels.Data,e="transform: translate("+L.AxisXParams.MarginLeft+"px) rotate("+L.AxisXParams.Angle+"deg); margin-top: "+L.AxisXParams.MarginTop+"px ; width: "+L.AxisXParams.Width+"px;",i="",s=0;s<t.length;s++)i+='<div class="mt-chart-label mt-chart-label__x" style="font-family: '+O.Options.Labels.Font.Family+"; font-size: "+O.Options.Labels.Font.Size+'"><span style="'+e+'">'+t[s]+"</span></div>";return i},MakeGrid:function(t,e){return O.Options.Grid.Visible?Lure.Chart.GetGrid(O.Options.Labels.Data.length,O._ScaleY.Scales[0].length-1,O.Options.Padding):""},MakeGraph:function(t,e){var i=O._ScaleY.Dict[e],s=O._ScaleY.Scales[i],a=O._ScaleY.MinMax[i],r=Lure.Chart.GetOrdinata(t.Data,s,a,O.Height),n=Lure.Chart.GetAbscissa(O.Options.Labels.Data,O.Width),o=Lure.Chart.GetPoints(n,r);return Lure.Chart.GetPath(o,O.Options.Series[e].Type,e,O.Options.Series[e].Color,O.Options.Series[e].Width)},CalcAxi6sX:function(){var t=Lure.CreateElementFromString('<div class="mt-chart-label mt-chart-label__x"><span>'+O.Options.Labels.Data[0]+"</span></div>"),e=Lure.GetInlineSize(t,getComputedStyle(Lure.Select("span")).fontSize),i=O.Width/O.Options.Labels.Data.length;O.Options.Padding=i/2,O.Block.AxisX.style.paddingLeft=i/2+"px";var s=e.height,a=e.width,r=void 0;if("auto"!==O.Options.Labels.Rotation)r=parseFloat(O.Options.Labels.Rotation);else{var n=(i-s)/(a+s);n<.1&&(n=0),n>1&&(n=1),r=-90*(1-n)}return{Height:Math.round(s/4+Math.sqrt(Math.pow(a,2)-Math.pow(i,2))),Width:a,MarginTop:a>i?Math.sqrt(Math.pow(a,2)-Math.pow(i,2))-s:0,MarginLeft:a>i?-i/2:-a/2,Angle:r}}},x={Tooltip:function(){return v.Template?void(this.Options.Tooltip.Template=v.Template):"line"===this.Options.Type||"bar"===this.Options.Type?void(this.Options.Tooltip.Template=m.Line):"pie"===this.Options.Type||"ring"===this.Options.Type?void(this.Options.Tooltip.Template=m.Pie):void 0}.bind(this),Series:function(){var t=[];if(null===this.Options.Series){for(var e=0;e<this._Series.length;e++){var i={};i.Name=this._Series[e].Name?this._Series[e].Name:"Unnamed",i.Title=this._Series[e].Title?this._Series[e].Title:i.Name,i.Color=this._Series[e].Color?this._Series[e].Color:S[e]?S[e]:"#000",i.Width=this._Series[e].Width?this._Series[e].Width:2,i.Data=this._Series[e].Data,i.Type=this._Series[e].Type?this._Series[e].Type.toLowerCase():r?r.toLowerCase():"line","pie"!==i.Type&&"ring"!==i.Type||(i.Colors=this._Series[e].Colors?this._Series[e].Colors:S,i.Width=this._Series[e].Width?this._Series[e].Width:30,i.Labels=this._Series[e].Labels?this._Series[e].Labels:!!this.Options.Labels.Data&&this.Options.Labels.Data),i.Line=e,i.isVisible="undefined"==typeof this._Series[e].Visible||this._Series[e].Visible,i.OwnAxis=this._Series[e].OwnAxis,i.Point=this._Series[e].Point,i.Point=Lure.Chart.GetSeriePointOptions(i),L.Legend+=Lure.Chart.MakeLegend(i,e),L.SeriesCount[i.Type.capitalize()]++,t.push(i)}this.Options.Series=t}}.bind(this),AxisY:function(){if(this.Width!==C.Width){for(var t=(this.Options.AxisY.Visible?1:0,0),e=0,i=0;i<this.Options.Series.length;i++)if(this.Options.Series[i].isVisible&&this.Options.Series[i].OwnAxis){for(var s=0,a=0;a<this.Options.Series[i].Data.length;a++){var r=Lure.GetTextWidth(this.Options.Series[i].Data[a],this.Options.AxisY.Font.Family,this.Options.AxisY.Font.Size);r>s&&(s=this.Options.Series[i].Data[a])}var n=Lure.GetTextWidth(this.Options.Series[i].OwnAxis[1],this.Options.AxisY.Font.Family,this.Options.AxisY.Font.Size);n>s&&(s=n),e+=s+8;var o=Lure.GetTextWidth(this.Options.Series[i].Title,this.Options.AxisY.Font.Family,this.Options.AxisY.Font.Size);e+=o>30?30:o}else if(this.Options.Series[i].isVisible&&!Array.isArray(this.Options.Series[i].OwnAxis))for(var l=0;l<this.Options.Series[i].Data.length;l++){var h=Lure.GetTextWidth(this.Options.Series[i].Data[l],this.Options.AxisY.Font.Family,this.Options.AxisY.Font.Size);h>t&&(t=this.Options.Series[i].Data[l])}e+=t+10+7,L.AxisYWidth=e}}.bind(this),AxisX:function(){if(this.Width!==C.Width){if(!this.Options.Labels.Visible)return void(L.AxisXParams={Height:0,Width:0,MarginTop:0,MarginLeft:0,Angle:0});for(var t=0,e=0;e<this.Options.Labels.Data.length;e++){var i=Lure.GetTextWidth(this.Options.Labels.Data[e],this.Options.AxisY.Font.Family,this.Options.AxisY.Font.Size);i>t&&(t=i)}var s=(this.Content.clientWidth-L.AxisYWidth)/this.Options.Labels.Data.length;s=(this.Content.clientWidth-L.AxisYWidth-s/2)/this.Options.Labels.Data.length,this.Options.Padding=s/2,this.Block.AxisX.style.paddingLeft=s/2+"px";var a=0,r=t,n=void 0;if("auto"!==this.Options.Labels.Rotation)n=parseFloat(this.Options.Labels.Rotation);else{var o=s/r;o<.15&&(o=0),o>1&&(o=1),n=-(180*Math.acos(o)/Math.PI).toFixed(2)}L.AxisXParams={Height:Math.round(Math.sqrt(Math.pow(r,2)-Math.pow(s,2)))+parseFloat(getComputedStyle(this.Block.AxisX).lineHeight),Width:r,MarginTop:r>s?Math.sqrt(Math.pow(r,2)-Math.pow(s,2))-a:0,MarginLeft:r>s?-s/2:-r/2,Angle:n}}}.bind(this),ScaleY:function(){return void(this._ScaleY=Lure.Chart.GetScaleY(this.Options.Series,this.Height-L.AxisXParams.Height,this))}.bind(this)},C={Width:0,Height:0,DataLength:0};this.__GetPathLine=function(t,e){L.Abscissa&&L.Width===this.Width||(L.Abscissa=Lure.Chart.GetAbscissa(O.Options.Labels.Data,this.Width));var i=this._ScaleY.Dict[e],s=this._ScaleY.Scales[i],a=O._ScaleY.MinMax[i],r=Lure.Chart.GetOrdinata(t.Data,s,a,O.Height),n=Lure.Chart.GetPoints(L.Abscissa,r,this.Options.Padding);L.SeriesPoints[e]=n;for(var o=n.length,l=[],h=[],c=[],d=[],u=[],p=[],f=0;f<o;f++)l[f]=n[f][0],h[f]=n[f][1];for(var v=0;v<o-1;v++)c[v]=h[v+1]-h[v],d[v]=l[v+1]-l[v],u[v]=c[v]/d[v];p[0]=u[0],p[o-1]=u[o-2];for(var g=1;g<o-1;g++)0===u[g]||0===u[g-1]||u[g-1]>0!=u[g]>0?p[g]=0:(p[g]=3*(d[g-1]+d[g])/((2*d[g]+d[g-1])/u[g-1]+(d[g]+2*d[g-1])/u[g]),isFinite(p[g])||(p[g]=0));for(var b="M "+l[0]+","+h[0],S='<g class="mt-chart-dots">',m=0;m<o-1;m++)b+=" C "+(l[m]+d[m]/3)+","+(h[m]+p[m]*d[m]/3)+" "+(l[m+1]-d[m]/3)+","+(h[m+1]-p[m+1]*d[m]/3)+" "+l[m+1]+","+h[m+1],t.Point.Visible&&(S+=Lure.Chart.GetPathLineDot(l[m],h[m],e,m,t.Color,t.Point.Radius));return t.Point.Visible&&(S+=Lure.Chart.GetPathLineDot(l[o-1],h[o-1],e,o-1,t.Color,t.Point.Radius)),S+="</g>",'<g class="mt-chart-serie" data-type="Line"><path data-line="'+e+'" d="'+b+'" fill="none" stroke="'+t.Color+'" stroke-width="'+t.Width+'"></path> '+S+"</g>"}.bind(this),this.__GetPathBar=function(t,e){L.Abscissa&&L.Width===this.Width||(L.Abscissa=Lure.Chart.GetAbscissa(O.Options.Labels.Data,this.Width));var i=this._ScaleY.Dict[e],s=this._ScaleY.Scales[i],a=O._ScaleY.MinMax[i],r=Lure.Chart.GetOrdinata(t.Data,s,a,O.Height),n=Lure.Chart.GetPoints(L.Abscissa,r,this.Options.Padding);L.SeriesPoints[e]=n;var o=this.Height,l=1;this.Options.SeriesOptions.BarStack||(l=.8*L.SeriesCount.Bar);var h=this.Width/this.Options.Labels.Data.length/2/l,c=1.2*h*L.SeriesBar-(1.2*h*L.SeriesCount.Bar/2-1.2*h/2),d='<g class="mt-chart-serie" data-type="Bar">',u="";this.Options.SeriesOptions.BarGradient&&(u="lc-gradient-"+Lure.Chart.Count,d+='<linearGradient id="'+u+'"  x1="0" y1="0%"><stop offset="0%" stop-color="rgba(0,0,0,0.2)"/><stop offset="33%" stop-color="rgba(255,255,255,0.2)"/><stop offset="100%" stop-color="rgba(0,0,0,0.3)"/></linearGradient>');for(var p="",f=0;f<n.length;f++){var v="M "+(c+n[f][0]-h/2)+" "+o+" L "+(c+n[f][0]+h/2)+" "+o+" "+(c+n[f][0]+h/2)+" "+n[f][1]+" "+(c+n[f][0]-h/2)+" "+n[f][1]+"Z";d+='<g class="lc-bar-elem"><path class="lc-bar-elem" data-line="'+e+'" data-item="'+f+'" d="'+v+'" fill="'+t.Color+'" stroke="#000" stroke-width="0"></path>',this.Options.SeriesOptions.BarGradient&&(d+='<path class="lc-bar-elem-gradient"  data-line="'+e+'" data-item="'+f+'" d="'+v+'" fill="url(#'+u+')" ></path>'),d+='<path class="mt-chart-tooltipable" data-type="bar" data-line="'+e+'" data-item="'+f+'" d="'+v+'" fill="#fff" fill-opacity="0" stroke="#fff" stroke-width="0"></path>',d+="</g>"}return d+=p+"</g>",L.SeriesBar++,d}.bind(this),this.__GetSvgCasual=function(){for(var t="",e="",i=0;i<this.Options.Series.length;i++)if(this.Options.Series[i].isVisible)switch(this.Options.Series[i].Type){case"line":t+=this.__GetPathLine(this.Options.Series[i],i);break;case"bar":e+=this.__GetPathBar(this.Options.Series[i],i)}return e+t}.bind(this),this.__GetSvgPie=function(){for(var t="",e=this.Height<this.Width?.9*this.Height:.9*this.Width,i=0;i<this.Options.Series.length;i++){var s=0,a=-45,r=e/4*(this.Options.Series.length-i)/(L.SeriesCount.Pie+L.SeriesCount.Ring),n=2*r;"ring"===this.Options.Series[i].Type&&(n=this.Options.Series[i].Width,r=2*r-n/2);for(var o=0;o<this.Options.Series[i].Data.length;o++)s+=this.Options.Series[i].Data[o];for(var l=0;l<this.Options.Series[i].Data.length;l++){var h=this.Options.Series[i].Data[l]/s*360;t+="<g>",t+='<path d="'+Lure.Chart.PieArc(this.Width/2,this.Height/2,r,a,a+h)+'" fill="none" stroke="'+this.Options.Series[i].Colors[l]+'" stroke-width="'+n+'" stroke-opacity="1"></path>',t+='<path class="mt-chart-tooltipable" data-type="pie" data-line="'+i+'" data-item="'+l+'" d="'+Lure.Chart.PieArc(this.Width/2,this.Height/2,r,a,a+h)+'" fill="none" stroke="#fff" stroke-width="'+n+'" stroke-opacity="0"></path>',t+="</g>",a+=h}}return t}.bind(this),x.Tooltip(),this.Tooltip=new Lure.Content({Name:"Tooltipchek",Target:this.Block.ChartArea,Content:'<div class="mt-chart-tooltip">\n                        <div class="val">'+this.Options.Tooltip.Template+"</div>\n                      </div>",Visible:!1,Controller:{Data:{}},BeforeShow:function(t,e){},Prop:function(){this._Timer=null,this._Timer2=null},Shower:function(){clearTimeout(this._Timer),clearTimeout(this._Timer2),this.Content.style.display="",this.Content.style.opacity="1"},Hider:function(){clearTimeout(this._Timer),this._Timer=setTimeout(function(){this.Content.style.opacity="0",this._Timer2=setTimeout(function(){this.Content.style.display="none"}.bind(this),200)}.bind(this),800)},Show:function(t){clearTimeout(this._Timer),this.Data.Name=t.data[0],this.Data.Value=t.data[1],this.Refresh(),this.Content.style.left=t.pos[0]+7+"px",this.Content.style.top=t.pos[1]-this.Content.clientHeight-7+"px",this.Content.style.backgroundColor=t.color},Methods:function(){this.Do=function(t){var e=t.currentTarget.dataset.type;switch(e){case"line":this.DoCircle(t);break;case"bar":this.DoBar(t);break;case"pie":this.DoPie(t)}}.bind(this),this.DoCircle=function(t){var e=t.currentTarget,i=parseInt(e.dataset.line),s=parseInt(e.dataset.item),a=e.attributes.stroke.value,r=parseInt(e.attributes["stroke-width"].value);e.attributes.fill.value=a,e.attributes.r.value=parseInt(e.attributes.r.value)+r,e.attributes.stroke.value="#fff";var n={data:[p[i].Name,p[i].Data[s]],color:a,pos:L.SeriesPoints[i][s]};this.Show(n)}.bind(this),this.DoBar=function(t){var e=t.currentTarget;e.setAttribute("fill-opacity",.2);var i=parseInt(e.dataset.line),s=parseInt(e.dataset.item),a={data:[O.Options.Series[i].Name,O.Options.Series[i].Data[s]],color:O.Options.Series[i].Color,pos:L.SeriesPoints[i][s]};this.Show(a)}.bind(this),this.DoPie=function(t){var e=t.currentTarget;e.setAttribute("stroke-opacity",.2);var i=parseInt(e.dataset.line),s=parseInt(e.dataset.item),a={data:[O.Options.Series[i].Labels?O.Options.Series[i].Labels[s]:O.Options.Series[i].Name,O.Options.Series[i].Data[s]],color:O.Options.Series[i].Colors[s],pos:[t.offsetX,t.offsetY]};this.Show(a)}.bind(this),this.Undo=function(t){var e=t.currentTarget.dataset.type;switch(e){case"line":this.UndoCircle(t);break;case"bar":this.UndoBar(t);break;case"pie":this.UndoPie(t)}},this.UndoCircle=function(t){var e=t.currentTarget,i=parseInt(e.attributes["stroke-width"].value);e.attributes.stroke.value=e.attributes.fill.value,e.attributes.fill.value="#fff",e.attributes.r.value-=i,this.Hide()},this.UndoBar=function(t){var e=t.currentTarget;e.setAttribute("fill-opacity",0),this.Hide()},this.UndoPie=function(t){var e=t.currentTarget;e.setAttribute("stroke-opacity",0),this.Hide()}},AfterBuild:function(){}}),Lure.AddEventListenerGlobal("mouseover",".mt-chart-point, .mt-chart-tooltipable",function(t){this.Tooltip.Do(t)},this.Content,this),Lure.AddEventListenerGlobal("mouseout",".mt-chart-point, .mt-chart-tooltipable",function(t){O.Tooltip.Undo(t)},this.Content),this.TestB=function(){var t=performance.now();Lure.Perf(t,"builder")},this.Buffer=L,this.Width,e.call(this),this.Refresh=function(){e.call(this)}.bind(this)}return _createClass(t,[{key:"Height",get:function(){return this.Block.Svg.clientHeight}},{key:"Width",get:function(){return this.Block.Svg.clientWidth-this.Options.Padding}}],[{key:"GetSeriePointOptions",value:function(t,e){var i=t.Point?t.Point:{};return i.Visible="undefined"==typeof i.Visible||i.Visible,i.Radius=i.Radius?i.Radius:4+t.Width/4,Number.isNaN(i.Radius),i}},{key:"GetScaleY",value:function(t,e,i){if("pie"===i.Type)return[];var s=t[0].Data[0],a=t[0].Data[0],r=!0,n=!0;"auto"!==i.Options.AxisY.Scale[0]&&"auto"!==i.Options.AxisY.Scale[1]&&(r=!1,s=i.Options.AxisY.Scale[0],a=i.Options.AxisY.Scale[1]),"auto"!==i.Options.AxisY.Scale[2]&&(n=!1);for(var o=[[t[0].Data[0],t[0].Data[0]]],l=0,h={Scales:[],Dict:[],MinMax:null},c=0;c<t.length;c++){h.Dict[c]=0,t[c].OwnAxis&&(l++,"undefined"!=typeof t[c].OwnAxis[0]?o.push(t[c].OwnAxis):o.push([t[c].Data[0],t[c].Data[0]]),h.Dict[c]=l);for(var d=0;d<t[c].Data.length;d++)r&&(t[c].Data[d]<s&&(s=t[c].Data[d]),t[c].Data[d]>a&&(a=t[c].Data[d])),t[c].OwnAxis&&"undefined"==typeof t[c].OwnAxis[0]&&(t[c].Data[d]<o[l][0]&&(o[l][0]=t[c].Data[d]),t[c].Data[d]>o[l][1]&&(o[l][1]=t[c].Data[d]))}o[0]=[s,a],h.MinMax=o;for(var u=0;u<o.length;u++){var p=o[u][1].toString().length,f=void 0;f=0!==u||n?o[u][2]?o[u][2]:(40*(o[u][1]-o[u][0])/e/Math.pow(10,p-1)/5).toFixed(1)*Math.pow(10,p-1)*5:i.Options.AxisY.Scale[2];for(var v=o[u][0],g=[];v<=o[u][1]+i.Options.Series[u].Width/2;)g.push(v),v+=f;g.push(v),h.Scales.push(g)}return h}},{key:"GetAbscissa",value:function(t,e){var i=e/t.length;return t.map(function(t,e){return e*i})}},{key:"GetOrdinata",value:function(t,e,i,s){for(var a=i[0],r=i[1],n=e[e.length-1]/r,o=[],l=0;l<t.length;l++)o.push(s-(t[l]-a)*s/(r-a)/n);return o}},{key:"GetPoints",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=[],a=0;a<e.length;a++)s.push([t[a]+i,e[a]]);return s}},{key:"aGetPath",value:function(t,e,i,s,a){switch(e){case"line":return Lure.Chart.GetPathLine(t,i,s,a);case"bar":return Lure.Chart.GetPathBar(t,i,s,a);case"pie":return""}}},{key:"aGetPathLine",value:function(t,e,i,s){for(var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=t.length,n=[],o=[],l=[],h=[],c=[],d=[],u=0;u<r;u++)n[u]=t[u][0],o[u]=t[u][1];for(var p=0;p<r-1;p++)l[p]=o[p+1]-o[p],h[p]=n[p+1]-n[p],c[p]=l[p]/h[p];d[0]=c[0],d[r-1]=c[r-2];for(var f=1;f<r-1;f++)0===c[f]||0===c[f-1]||c[f-1]>0!=c[f]>0?d[f]=0:(d[f]=3*(h[f-1]+h[f])/((2*h[f]+h[f-1])/c[f-1]+(h[f]+2*h[f-1])/c[f]),isFinite(d[f])||(d[f]=0));for(var v="M "+n[0]+","+o[0],g='<g class="mt-chart-dots">',b=0;b<r-1;b++)v+=" C "+(n[b]+h[b]/3)+","+(o[b]+d[b]*h[b]/3)+" "+(n[b+1]-h[b]/3)+","+(o[b+1]-d[b+1]*h[b]/3)+" "+n[b+1]+","+o[b+1],a&&(g+=Lure.Chart.GetPathLineDot(n[b],o[b],e,b,i,s));return g+="</g>",'<g class="mt-chart-serie"><path data-line="'+e+'" d="'+v+'" fill="none" stroke="'+i+'" stroke-width="'+s+'"></path> '+g+"</g>"}},{key:"GetPathLineDot",value:function(t,e,i,s,a,r){return'<circle class="mt-chart-point" data-type="line" data-line="'+i+'" data-item="'+s+'" cx="'+t+'" cy="'+e+'" r="'+r+'" stroke="'+a+'" stroke-width="2" fill="#fff" ></circle>'}},{key:"aGetPathBar",value:function(t,e,i,s){console.log("GetPathBar",t);for(var a=0;a<t.length;a++){"M "+t[a][0]+" "+t[a][1]+" L "+t[a][0]+" "+t[a][1]}return do2ts}},{key:"PolarToCartesius",value:function(t,e,i,s){var a=(s-0)*Math.PI/180;return{x:t+i*Math.cos(a),y:e+i*Math.sin(a)}}},{key:"PieArc",value:function(t,e,i,s,a){var r=Lure.Chart.PolarToCartesius(t,e,i,a),n=Lure.Chart.PolarToCartesius(t,e,i,s),o=a-s<=180?"0":"1",l=["M",r.x,r.y,"A",i,i,0,o,0,n.x,n.y].join(" ");return l}},{key:"CheckOwnAxis",value:function(t){if(!t.OwnAxis)return!1;if(Array.isArray(t.OwnAxis)){var e=!1,i=!1;if("auto"===t.OwnAxis[0]&&"undefined"==typeof t.OwnAxis[0]||(e=t.Data[0]),"auto"===t.OwnAxis[1]&&"undefined"==typeof t.OwnAxis[1]||(i=t.Data[1]),!e&&!i)return t.OwnAxis;for(var s=0;s<t.Data.length;s++)t.Data[s]<e&&(e=t.Data[s]),t.Data[s]>i&&(i=t.Data[s])}}},{key:"MakeLegend",value:function(t,e){var i="lc-legeng_ch"+Lure.Chart.Count;return'<div class="mt-chart-legend__item row">\n                          <input class="mt-legend-checkbox" type="checkbox" '+(t.isVisible?'checked="cheched"':"")+' id="'+i+'">\n                          <div class="mt-legend-icon" style="background-color: '+t.Color+'"></div>\n                          <label class="mt-legend-label" for="'+i+'">'+t.Name+"</label>\n                        </div>"}},{key:"GetGrid",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s="",a=0;a<e;a++){s+='<div class="mt-chart__grid-line row flex-100 flex-between" >';for(var r=0;r<t;r++)0===r&&(s+="<div class='mt-chart__grid-item flex-100' style=\"width: "+i+"px; max-width: "+i+'px"></div>'),s+="<div class='mt-chart__grid-item flex-100'></div>";s+="</div>"}return s+=""}}]),t}()},Lure.Chart=Lure.Plugin.Chart.Chart,Lure.Chart.Count=0,Lure._GenerateString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t+(Math.random().toString(36)+Math.random().toString(36)+Math.random().toString(36)).replace("0.","").replace(/[\d]+/,"").substring(0,1);return Lure.Select("#"+e)&&(e=Lure._GenerateString(t)),e};
//# sourceMappingURL=lure.chart.min.js.map
